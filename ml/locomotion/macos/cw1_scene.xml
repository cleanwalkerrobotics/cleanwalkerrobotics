<mujoco model="cw1_locomotion">
  <compiler angle="radian" autolimits="true"/>

  <option timestep="0.005" gravity="0 0 -9.81" iterations="50"
          solver="Newton" integrator="implicitfast"/>

  <size nconmax="200" njmax="500"/>

  <default>
    <joint armature="0.01" damping="2.0" frictionloss="0.1"/>
    <geom friction="1.0 0.005 0.001" condim="3" conaffinity="1" contype="1"
          rgba="0.3 0.3 0.3 1"/>
    <position kp="80" kv="2.0"/>
  </default>

  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0.2 0.2 0.2"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global offwidth="1920" offheight="1080"/>
  </visual>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0"
             width="512" height="3072"/>
    <texture type="2d" name="groundplane" builtin="checker" mark="edge"
             rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3" markrgb="0.8 0.8 0.8"
             width="300" height="300"/>
    <material name="groundplane" texture="groundplane" texuniform="true"
              texrepeat="5 5" reflectance="0.2"/>
    <material name="body_mat" rgba="0.15 0.15 0.15 1"/>
    <material name="leg_mat" rgba="0.25 0.25 0.25 1"/>
    <material name="foot_mat" rgba="0.6 0.6 0.6 1"/>
    <material name="arm_mat" rgba="0.2 0.2 0.3 1"/>
  </asset>

  <worldbody>
    <light pos="0 0 3.5" dir="0 0 -1" directional="true"/>
    <geom name="floor" type="plane" size="50 50 0.1" material="groundplane"/>

    <!-- CW-1 Robot Body -->
    <body name="body" pos="0 0 0.35">
      <freejoint name="root"/>
      <inertial pos="0 0 0" mass="8.0"
                diaginertia="0.1 0.3 0.35"/>
      <geom name="body_geom" type="box" size="0.30 0.075 0.06"
            material="body_mat"/>
      <site name="body_imu" pos="0 0 0"/>

      <!-- Head -->
      <body name="head" pos="0.34 0 0.02">
        <inertial pos="0 0 0" mass="0.5" diaginertia="0.001 0.001 0.001"/>
        <geom name="head_geom" type="box" size="0.04 0.075 0.04"
              rgba="0.2 0.2 0.2 1"/>
      </body>

      <!-- ============ FRONT LEFT LEG ============ -->
      <body name="FL_hip" pos="0.20 0.075 0">
        <joint name="FL_hip_yaw" type="hinge" axis="0 0 1"
               range="-0.4993 0.4993" damping="0.5"/>
        <inertial pos="0 0.03 0" mass="0.4" diaginertia="0.0005 0.0005 0.0005"/>
        <geom name="FL_hip_geom" type="sphere" size="0.03" material="leg_mat"/>

        <body name="FL_thigh" pos="0 0.06 0">
          <joint name="FL_hip_pitch" type="hinge" axis="0 1 0"
                 range="-1.5708 1.5708" damping="0.5"/>
          <inertial pos="0 0 -0.10" mass="0.5" diaginertia="0.002 0.002 0.0005"/>
          <geom name="FL_thigh_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                size="0.02" material="leg_mat"/>

          <body name="FL_calf" pos="0 0 -0.20">
            <joint name="FL_knee_pitch" type="hinge" axis="0 1 0"
                   range="-0.0995 2.6005" damping="0.5"/>
            <inertial pos="0 0 -0.10" mass="0.4" diaginertia="0.001 0.001 0.0003"/>
            <geom name="FL_calf_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                  size="0.015" material="leg_mat"/>

            <body name="FL_foot" pos="0 0 -0.20">
              <inertial pos="0 0 0" mass="0.05" diaginertia="0.0001 0.0001 0.0001"/>
              <geom name="FL_foot_geom" type="sphere" size="0.025"
                    material="foot_mat" friction="1.2 0.005 0.001"/>
              <site name="FL_foot_site" pos="0 0 0"/>
            </body>
          </body>
        </body>
      </body>

      <!-- ============ FRONT RIGHT LEG ============ -->
      <body name="FR_hip" pos="0.20 -0.075 0">
        <joint name="FR_hip_yaw" type="hinge" axis="0 0 1"
               range="-0.4993 0.4993" damping="0.5"/>
        <inertial pos="0 -0.03 0" mass="0.4" diaginertia="0.0005 0.0005 0.0005"/>
        <geom name="FR_hip_geom" type="sphere" size="0.03" material="leg_mat"/>

        <body name="FR_thigh" pos="0 -0.06 0">
          <joint name="FR_hip_pitch" type="hinge" axis="0 1 0"
                 range="-1.5708 1.5708" damping="0.5"/>
          <inertial pos="0 0 -0.10" mass="0.5" diaginertia="0.002 0.002 0.0005"/>
          <geom name="FR_thigh_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                size="0.02" material="leg_mat"/>

          <body name="FR_calf" pos="0 0 -0.20">
            <joint name="FR_knee_pitch" type="hinge" axis="0 1 0"
                   range="-0.0995 2.6005" damping="0.5"/>
            <inertial pos="0 0 -0.10" mass="0.4" diaginertia="0.001 0.001 0.0003"/>
            <geom name="FR_calf_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                  size="0.015" material="leg_mat"/>

            <body name="FR_foot" pos="0 0 -0.20">
              <inertial pos="0 0 0" mass="0.05" diaginertia="0.0001 0.0001 0.0001"/>
              <geom name="FR_foot_geom" type="sphere" size="0.025"
                    material="foot_mat" friction="1.2 0.005 0.001"/>
              <site name="FR_foot_site" pos="0 0 0"/>
            </body>
          </body>
        </body>
      </body>

      <!-- ============ REAR LEFT LEG ============ -->
      <body name="RL_hip" pos="-0.20 0.075 0">
        <joint name="RL_hip_yaw" type="hinge" axis="0 0 1"
               range="-0.4993 0.4993" damping="0.5"/>
        <inertial pos="0 0.03 0" mass="0.4" diaginertia="0.0005 0.0005 0.0005"/>
        <geom name="RL_hip_geom" type="sphere" size="0.03" material="leg_mat"/>

        <body name="RL_thigh" pos="0 0.06 0">
          <joint name="RL_hip_pitch" type="hinge" axis="0 1 0"
                 range="-1.5708 1.5708" damping="0.5"/>
          <inertial pos="0 0 -0.10" mass="0.5" diaginertia="0.002 0.002 0.0005"/>
          <geom name="RL_thigh_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                size="0.02" material="leg_mat"/>

          <body name="RL_calf" pos="0 0 -0.20">
            <joint name="RL_knee_pitch" type="hinge" axis="0 1 0"
                   range="-2.6005 0.0995" damping="0.5"/>
            <inertial pos="0 0 -0.10" mass="0.4" diaginertia="0.001 0.001 0.0003"/>
            <geom name="RL_calf_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                  size="0.015" material="leg_mat"/>

            <body name="RL_foot" pos="0 0 -0.20">
              <inertial pos="0 0 0" mass="0.05" diaginertia="0.0001 0.0001 0.0001"/>
              <geom name="RL_foot_geom" type="sphere" size="0.025"
                    material="foot_mat" friction="1.2 0.005 0.001"/>
              <site name="RL_foot_site" pos="0 0 0"/>
            </body>
          </body>
        </body>
      </body>

      <!-- ============ REAR RIGHT LEG ============ -->
      <body name="RR_hip" pos="-0.20 -0.075 0">
        <joint name="RR_hip_yaw" type="hinge" axis="0 0 1"
               range="-0.4993 0.4993" damping="0.5"/>
        <inertial pos="0 -0.03 0" mass="0.4" diaginertia="0.0005 0.0005 0.0005"/>
        <geom name="RR_hip_geom" type="sphere" size="0.03" material="leg_mat"/>

        <body name="RR_thigh" pos="0 -0.06 0">
          <joint name="RR_hip_pitch" type="hinge" axis="0 1 0"
                 range="-1.5708 1.5708" damping="0.5"/>
          <inertial pos="0 0 -0.10" mass="0.5" diaginertia="0.002 0.002 0.0005"/>
          <geom name="RR_thigh_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                size="0.02" material="leg_mat"/>

          <body name="RR_calf" pos="0 0 -0.20">
            <joint name="RR_knee_pitch" type="hinge" axis="0 1 0"
                   range="-2.6005 0.0995" damping="0.5"/>
            <inertial pos="0 0 -0.10" mass="0.4" diaginertia="0.001 0.001 0.0003"/>
            <geom name="RR_calf_geom" type="capsule" fromto="0 0 0 0 0 -0.20"
                  size="0.015" material="leg_mat"/>

            <body name="RR_foot" pos="0 0 -0.20">
              <inertial pos="0 0 0" mass="0.05" diaginertia="0.0001 0.0001 0.0001"/>
              <geom name="RR_foot_geom" type="sphere" size="0.025"
                    material="foot_mat" friction="1.2 0.005 0.001"/>
              <site name="RR_foot_site" pos="0 0 0"/>
            </body>
          </body>
        </body>
      </body>

      <!-- ============ ARM (5 DOF, heavily damped during locomotion) ============ -->
      <body name="arm_turret" pos="0.10 0 0.06">
        <joint name="arm_turret_yaw" type="hinge" axis="0 0 1"
               range="-3.1416 3.1416" damping="20.0"/>
        <inertial pos="0 0 0.03" mass="0.3" diaginertia="0.0003 0.0003 0.0003"/>
        <geom name="arm_turret_geom" type="cylinder" size="0.04 0.03"
              material="arm_mat"/>

        <body name="arm_upper" pos="0 0 0.06">
          <joint name="arm_shoulder_pitch" type="hinge" axis="0 1 0"
                 range="-0.7854 3.1416" damping="20.0"/>
          <inertial pos="0 0 0.09" mass="0.3" diaginertia="0.001 0.001 0.0002"/>
          <geom name="arm_upper_geom" type="capsule" fromto="0 0 0 0 0 0.18"
                size="0.015" material="arm_mat"/>

          <body name="arm_forearm" pos="0 0 0.18">
            <joint name="arm_elbow_pitch" type="hinge" axis="0 1 0"
                   range="0 2.618" damping="20.0"/>
            <inertial pos="0 0 0.09" mass="0.3" diaginertia="0.001 0.001 0.0002"/>
            <geom name="arm_forearm_geom" type="capsule" fromto="0 0 0 0 0 0.18"
                  size="0.012" material="arm_mat"/>

            <body name="arm_wrist" pos="0 0 0.18">
              <joint name="arm_wrist_pitch" type="hinge" axis="0 1 0"
                     range="-1.5708 1.5708" damping="20.0"/>
              <inertial pos="0 0 0.025" mass="0.15"
                        diaginertia="0.0001 0.0001 0.0001"/>
              <geom name="arm_wrist_geom" type="cylinder" size="0.01 0.025"
                    material="arm_mat"/>

              <body name="arm_gripper" pos="0 0 0.05">
                <joint name="arm_gripper_joint" type="hinge" axis="0 1 0"
                       range="0 1.0472" damping="20.0"/>
                <inertial pos="0 0 0.02" mass="0.15"
                          diaginertia="0.0001 0.0001 0.0001"/>
                <geom name="arm_gripper_geom" type="box" size="0.04 0.015 0.05"
                      material="arm_mat"/>
              </body>
            </body>
          </body>
        </body>
      </body>

      <!-- ============ BAG FRAME (1 DOF, heavily damped) ============ -->
      <body name="bag_mount" pos="-0.15 0 0.06">
        <inertial pos="0 0 0" mass="0.2" diaginertia="0.0002 0.0002 0.0002"/>
        <geom name="bag_mount_geom" type="cylinder" size="0.03 0.02"
              rgba="0.3 0.3 0.3 1"/>

        <body name="bag_frame" pos="0 0 0.02">
          <joint name="bag_frame_hinge" type="hinge" axis="0 1 0"
                 range="0 2.3562" damping="20.0"/>
          <inertial pos="0 0 0.05" mass="0.3" diaginertia="0.001 0.001 0.0002"/>
          <geom name="bag_frame_geom" type="box" size="0.11 0.075 0.01"
                pos="0 0 0.05" rgba="0.4 0.35 0.3 1"/>
        </body>
      </body>

    </body> <!-- end body -->
  </worldbody>

  <!-- Leg actuators (position-controlled, matching URDF PD gains) -->
  <actuator>
    <position name="FL_hip_yaw_act" joint="FL_hip_yaw" kp="25"/>
    <position name="FL_hip_pitch_act" joint="FL_hip_pitch" kp="25"/>
    <position name="FL_knee_pitch_act" joint="FL_knee_pitch" kp="25"/>
    <position name="FR_hip_yaw_act" joint="FR_hip_yaw" kp="25"/>
    <position name="FR_hip_pitch_act" joint="FR_hip_pitch" kp="25"/>
    <position name="FR_knee_pitch_act" joint="FR_knee_pitch" kp="25"/>
    <position name="RL_hip_yaw_act" joint="RL_hip_yaw" kp="25"/>
    <position name="RL_hip_pitch_act" joint="RL_hip_pitch" kp="25"/>
    <position name="RL_knee_pitch_act" joint="RL_knee_pitch" kp="25"/>
    <position name="RR_hip_yaw_act" joint="RR_hip_yaw" kp="25"/>
    <position name="RR_hip_pitch_act" joint="RR_hip_pitch" kp="25"/>
    <position name="RR_knee_pitch_act" joint="RR_knee_pitch" kp="25"/>
  </actuator>

  <!-- Sensors for observation -->
  <sensor>
    <framequat name="body_quat" objtype="body" objname="body"/>
    <framelinvel name="body_linvel" objtype="body" objname="body"/>
    <frameangvel name="body_angvel" objtype="body" objname="body"/>
  </sensor>
</mujoco>
